<!DOCTYPE html>

<html>

<head>
    <title>Herkut</title>
    <link rel="stylesheet" href="style.css"/>
</head>

<body style="margin-left: 20%;">

  <div id="pin-div">
    <input id="pin" placeholder="pin code" type="password" />
    <button onclick="checkPin()">login</button>
  </div>

    <h1 class="hidden">Tuotteemme</h1>

    <div class="hidden" id="sisältö"></div>
    
<script>

  function checkPin() {
    var pin = document.getElementById("pin").value
    var hiddenElements = document.getElementsByClassName("hidden")

    if(pin == "1010") {
     for (i=0; i < hiddenElements.length; i++){
      hiddenElements[i].style.visibility = "visible"
     }
     document.getElementById("pin-div").style.visibility = "hidden"
    }
    
  }


document.getElementById("sisältö").innerHTML = "<h4>Ladataan...</h4>"

let x = "<table><thead><th>Herkun nimi</th><th>tuotekoodi</th></thead><tbody>"


fetch('http://localhost:3300/api/herkut')
  .then(jsonResponse => jsonResponse.json()) // muutetaan json data javascript muotoon
  .then(oliot => oliot.map(c => { // loopataan läpi oliot
    x += `<tr><td>${c.name}</td><td>${c.id}</td></tr>`
   
    }
  ))

  setTimeout(() => {
    x += `</tbody></table>`
  document.getElementById("sisältö").innerHTML = x}
  , 500 )


</script>

</body>


</html>